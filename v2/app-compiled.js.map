{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app-compiled.js","sourcesContent":["var express    = require(\"express\"),\n    app        = express(),\n    bodyParser = require(\"body-parser\"),\n    mongoose   = require(\"mongoose\"),\n    Campground = require('./models/campgrounds'),\n    seedDB     = require('./seeds');\n    Comment    = require('./models/comment');\n\nmongoose.connect(\"mongodb://localhost/yelp_camp/v2\");\napp.use(bodyParser.urlencoded({extended: true}));\napp.set(\"view engine\", \"ejs\");\nseedDB();\n\napp.get(\"/\", function(req, res){\n    res.render(\"landing\");\n    console.log(\"someone is checking out the landing page\");\n});\n\n\napp.get(\"/campgrounds\", function(req, res){\n  Campground.find({}, function(err, allCampgrounds) {\n    if (err) {\n      console.log(err)\n    } else {\n      res.render(\"campgrounds/index\", {campgrounds:allCampgrounds});\n    }\n  })\n});\n\n\napp.post(\"/campgrounds\", function(req, res){\n  // get data from form and add to campgrounds array\n  var name = req.body.name;\n  var image = req.body.image;\n  var desc = req.body.description;\n  var newCampground = {name: name, image: image, description: desc};\n  // Crate a new campground andsave to database\n  Campground.create(newCampground, function(err, newlyCreated) {\n    if (err) {\n      console.log(err)\n    } else {\n      res.redirect(\"/campgrounds\");\n    }\n  });\n});\n\n\napp.get(\"/campgrounds/new\", function(req, res) {\n  res.render(\"campgrounds/new\");\n});\n\n\n// Show - shows more info about each campground\napp.get(\"/campgrounds/:id\", function(req, res) {\n  // Find campground with provided ID\n  Campground.findById(req.params.id).populate(\"comments\").exec(function(err, foundCampground) {\n    if(err) {\n      console.log(err)\n    } else {\n      console.log(foundCampground);\n      res.render(\"campgrounds/show\", {campground: foundCampground});\n    }\n  });\n});\n\n\n// ================\n// Comment Routes\n// ================\n\napp.get(\"/campgrounds/:id/comments/new\", function(req, res) {\n// find campground by id\n  Campground.findById(req.params.id, function(err, campground) {\n    if (err) {\n      console.log(err);\n    } else {\n      res.render(\"comments/new\", {campground: campground});\n    }\n  });\n});\n\napp.post('/campgrounds/:id/comments', function(req, res) {\n  // look up campground using ID\n  Campground.findById(req.params.id, function(err, campground) {\n    if (err) {\n      console.log(err)\n      res.redirect(\"/campgrounds\")\n    } else {\n     Comment.create(req.body.comment, function(err, comment) {\n        if(err) {\n          console.log(err);\n        } else {\n          campground.comments.push(comment);\n          campground.save();\n          res.redirect(`/campgrounds/${campground._id}`)\n        }\n      })\n    }\n  });\n\n  // create new comment\n  // connect new comment to campground\n  // redirect camprgound show page\n})\n\napp.listen(3000, process.env.IP, function(){\n  console.log(\"YelpCamp has started\");\n});\n\n"]}